<html>
  <head>
    <meta
      property="og:image"
      content="https://cdn.lotterybox.com/mobile/assets/share.png"
    />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"
    />
  </head>
  <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
  <script>
    var bridge = {
      default: this,
      call: function (b, a, c) {
        var e = "";
        "function" == typeof a && ((c = a), (a = {}));
        a = { data: void 0 === a ? null : a };
        if ("function" == typeof c) {
          var g = "dscb" + window.dscb++;
          window[g] = c;
          a._dscbstub = g;
        }
        a = JSON.stringify(a);
        if (window._dsbridge) e = _dsbridge.call(b, a);
        else if (window._dswk || -1 != navigator.userAgent.indexOf("_dsbridge"))
          e = prompt("_dsbridge=" + b, a);
        return JSON.parse(e || "{}").data;
      },
      register: function (b, a, c) {
        c = c ? window._dsaf : window._dsf;
        window._dsInit ||
          ((window._dsInit = !0),
          setTimeout(function () {
            bridge.call("_dsb.dsinit");
          }, 0));
        "object" == typeof a ? (c._obs[b] = a) : (c[b] = a);
      },
      registerAsyn: function (b, a) {
        this.register(b, a, !0);
      },
      hasNativeMethod: function (b, a) {
        return this.call("_dsb.hasNativeMethod", { name: b, type: a || "all" });
      },
      disableJavascriptDialogBlock: function (b) {
        this.call("_dsb.disableJavascriptDialogBlock", { disable: !1 !== b });
      },
    };
    !(function () {
      if (!window._dsf) {
        var b = {
            _dsf: { _obs: {} },
            _dsaf: { _obs: {} },
            dscb: 0,
            dsBridge: bridge,
            close: function () {
              bridge.call("_dsb.closePage");
            },
            _handleMessageFromNative: function (a) {
              var e = JSON.parse(a.data),
                b = { id: a.callbackId, complete: !0 },
                c = this._dsf[a.method],
                d = this._dsaf[a.method],
                h = function (a, c) {
                  b.data = a.apply(c, e);
                  bridge.call("_dsb.returnValue", b);
                },
                k = function (a, c) {
                  e.push(function (a, c) {
                    b.data = a;
                    b.complete = !1 !== c;
                    bridge.call("_dsb.returnValue", b);
                  });
                  a.apply(c, e);
                };
              if (c) h(c, this._dsf);
              else if (d) k(d, this._dsaf);
              else if (((c = a.method.split(".")), !(2 > c.length))) {
                a = c.pop();
                var c = c.join("."),
                  d = this._dsf._obs,
                  d = d[c] || {},
                  f = d[a];
                f && "function" == typeof f
                  ? h(f, d)
                  : ((d = this._dsaf._obs),
                    (d = d[c] || {}),
                    (f = d[a]) && "function" == typeof f && k(f, d));
              }
            },
          },
          a;
        for (a in b) window[a] = b[a];
        bridge.register("_hasJavascriptMethod", function (a, b) {
          b = a.split(".");
          if (2 > b.length) return !(!_dsf[b] && !_dsaf[b]);
          a = b.pop();
          b = b.join(".");
          return (b = _dsf._obs[b] || _dsaf._obs[b]) && !!b[a];
        });
      }
    })();
  </script>
  <body>
    <div>
      <button onclick="getToken()">getToken:</button>
      <span id="token"></span>
    </div>
    <div>
      <button onclick="toRecharge()">toRecharge</button>
    </div>
    <div>
      <button onclick="toWithdraw()">toWithdraw</button>
    </div>
    <div>
      <button onclick="toLogin()">toLogin</button>
    </div>
    <div>
      <button onclick="toShare({title:'你好'})">toShare1</button>
    </div>
    <div>
      <button
        onclick="toShare({img:'https://pics4.baidu.com/feed/37d12f2eb9389b5033f1e6d612fbdbd1e6116e06.jpeg@f_auto?token=e33f314284b60792d339829c935f3f76'})"
      >
        toShare2
      </button>
    </div>
    <div>
      <button
        onclick="toShare({title:'你好',img:'https://pics4.baidu.com/feed/37d12f2eb9389b5033f1e6d612fbdbd1e6116e06.jpeg@f_auto?token=e33f314284b60792d339829c935f3f76'})"
      >
        toShare3
      </button>
    </div>
  </body>
  <script>
    new window.VConsole();
    function getToken() {
      const token = dsBridge.call("Native.getToken");
      document.querySelector("#token").innerHTML = token;
      console.log(token);
    }
    function toRecharge() {
      dsBridge.call("Native.toRecharge");
    }
    function toWithdraw() {
      dsBridge.call("Native.toWithdraw");
    }
    function toLogin() {
      dsBridge.call("Native.toLogin");
    }
    function toShare(data) {
      console.log(data);
      dsBridge.call("Native.toShare", JSON.stringify(data));
    }
  </script>
</html>
