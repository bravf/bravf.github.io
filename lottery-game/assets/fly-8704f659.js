import{u as ne}from"./index-707d9a83.js";import{u as le,r as q,a as H}from"./base-2058b0e4.js";import{_ as ue,r as o,y as l,g as oe,o as s,a as n,b as r,F as p,h as _,n as c,u as i,t as M,i as A}from"./index-4153e28a.js";const re={class:"fly"},ie={class:"history"},ce={class:"stones"},ve={class:"odds"},de={class:"time-axis"},he={key:0},ye={class:"odds-axis"},xe={key:0},pe={class:"stop-users"},_e=["width","height"],me=["d","stroke"],fe={__name:"fly",setup(ge){const N=o([1.05,1.21,2.35,10.45,103.33]),b=o([]),$=o(375),h=l(()=>$.value),y=l(()=>h.value),x=o(0),Q=o(500),v=o(1),R=o(500),k=o(50),S=o(30),B=o(10),F=o([]),T=l(()=>z(v.value)),V=l(()=>({"background-position-y":(v.value-1)*50+"px"})),w=l(()=>(h.value-B.value*2)/Math.max(4,x.value)),W=l(()=>(y.value-B.value*2)/Math.max(4,v.value)),d=l(()=>({x:0,y:y.value-W.value})),O=l(()=>({x:x.value*w.value,y:y.value-v.value*W.value})),a=l(()=>({x:Math.min(O.value.x,h.value-k.value),y:Math.max(S.value,O.value.y)})),m=l(()=>({x:a.value.x*.9,y:(d.value.y-a.value.y)*.9+a.value.y})),Y=l(()=>{const e=a.value.x*.8,u=C(e);return Math.atan2(a.value.x-e,u-a.value.y)*180/Math.PI-90}),j=l(()=>({left:Math.max(0,a.value.x-k.value/2)+"px",top:Math.max(0,a.value.y-S.value/2)+"px",width:k.value+"px",height:S.value+"px",transform:`rotate(${Y.value}deg)`})),D=l(()=>`M${d.value.x},${d.value.y} Q${m.value.x},${m.value.y} ${a.value.x},${a.value.y}`);l(()=>`M${d.value.x},${d.value.y} L${a.value.x},${d.value.y} L${a.value.x},${a.value.y}`);function U(e){if(!x.value)return!0;const u=Math.ceil(x.value/4);return e%u===0}function G(e){if(!v.value)return!0;const u=Math.ceil(v.value/4);return e%u===0}function z(e){return e>=100.01?"purple":e>=5.01?"blue":e>=2.01?"cyan":e>=1.21?"green":"red"}function C(e,u=d.value.x,t=d.value.y,E=m.value.x,Z=m.value.y,ee=a.value.x,te=a.value.y){const P=u-2*E+ee,f=2*(E-u),ae=u-e,L=f*f-4*P*ae,I=(-f+Math.sqrt(L))/(2*P),se=(-f-Math.sqrt(L))/(2*P),g=I>=0&&I<=1?I:se;return Math.pow(1-g,2)*t+2*g*(1-g)*Z+Math.pow(g,2)*te}function J(e){const u=Math.min(e*w.value,a.value.x),t=C(u);return{left:u+"px",top:t+"px"}}function K(e){return{left:e.x+"px",transform:`translateY(${e.y}px)`,background:e.color}}function X(e){return e.y<y.value}return oe(()=>{$.value=document.body.clientWidth}),ne(document.body,()=>{$.value=document.body.clientWidth}),le(()=>{x.value+=.1,v.value+=.01,q(50)&&F.value.push(Math.max(0,x.value-.1)),q(30)&&b.value.push({x:H(h.value-50),y:0,color:["yellow","green","red"][H(4)]}),b.value.forEach(e=>{e.y+=4})},100),(e,u)=>(s(),n("div",re,[r("div",ie,[(s(!0),n(p,null,_(N.value,t=>(s(),n("div",{class:"history-item",style:c({background:z(t)})},M(t),5))),256))]),r("div",{class:"stage",style:c(i(V))},[r("div",ce,[(s(!0),n(p,null,_(b.value,t=>(s(),n(p,null,[X(t)?(s(),n("div",{key:0,class:"stone-item",style:c(K(t))},null,4)):A("",!0)],64))),256))]),r("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:c(i(j))},null,4),r("div",ve,M(v.value.toFixed(2))+"x",1),r("div",{class:"time-axis-box",style:c({width:i(h)+"px"})},[r("div",de,[(s(!0),n(p,null,_(Q.value,t=>(s(),n("div",{class:"time-axis-item",style:c({width:i(w)+"px"})},[U(t-1)?(s(),n("span",he,M(t-1)+"s",1)):A("",!0)],4))),256))])],4),r("div",{class:"odds-axis-box",style:c({height:i(y)+"px"})},[r("div",ye,[(s(!0),n(p,null,_(R.value,t=>(s(),n("div",{class:"odds-axis-item",style:c({height:i(W)+"px"})},[G(t-1)?(s(),n("span",xe,M(t-1)+"x",1)):A("",!0)],4))),256))])],4),r("div",pe,[(s(!0),n(p,null,_(F.value,t=>(s(),n("div",{class:"stop-user",style:c({...J(t)}),key:t},null,4))),128))]),(s(),n("svg",{width:i(h),height:i(y)},[r("path",{d:i(D),fill:"none",stroke:i(T)},null,8,me)],8,_e))],4)]))}},Se=ue(fe,[["__scopeId","data-v-cab9ed32"]]);export{Se as default};
