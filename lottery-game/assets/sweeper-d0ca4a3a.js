import{_ as P,r as u,w as z,o as j,a as o,c as l,b as i,F as h,d as S,n as p,e as v,t as f,f as E,g as H,p as J,h as K}from"./index-36e27aaf.js";import{s as O,a as Q,b as m}from"./base-0ae51dc8.js";const R=g=>(J("data-v-0f423f92"),g=g(),K(),g),U={class:"topbar"},Y={class:"type-selector-box"},Z=["onClick"],ee={class:"row"},te=["onClick"],se={key:0,class:"shovel",src:"https://res.cloudinary.com/fiewin/image/upload/images/boomShovelNew.png"},ae={key:1,src:"https://res.cloudinary.com/fiewin/image/upload/images/boomImgNew.png"},ne={key:2,src:"https://res.cloudinary.com/fiewin/image/upload/images/frozenBoomNew1.png"},oe={key:3,class:"coin"},le={class:"inner"},ue=R(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/Coin_b.png"},null,-1)),ie=R(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/boomRestart.png"},null,-1)),ce=[ie],re={class:"flex"},ve={__name:"sweeper",setup(g){const r=u(!1),s=u(null),y=u(null),x=u(null),B=u(),w=u(375),k=u(0),c=u(2),d=u(16),M=u(12),I=u(0),b=u(0);function T(){y.value=N(),I.value=M.value/c.value,b.value=(w.value-d.value*2-M.value)/c.value}function F(e){r.value||(c.value=e)}async function $(){r.value=!0,y.value=N()}async function C(e=!0){e?(A(),O(`这一把赢了${s.value.bouns}`)):Q("踩雷了，继续下一把吧"),r.value=!1,s.value=D()}function A(){const e=[];y.value.forEach(n=>{n.forEach(t=>{t.status||e.push(t)})}),e[parseInt(Math.random()*e.length)].status=-2}function X(e){return{"block-scale-animation":r.value&&e.status===0,"block-green":e.status===1,"block-red":e.status===-1}}async function q(e){await m(50);const n=e.querySelector(".coin"),t=n.querySelector(".inner"),a=B.value,_=n.getBoundingClientRect(),W=a.x-_.x,L=a.y-_.y;await m(300),t.style.animation="none",await m(50),n.style.transform=`translate3d(${W}px, 0, 0)`,t.style.transform=`translate3d(0, ${L}px, 0)`,await m(500),n.style.display="none"}async function G(e,n){if(!r.value||e.status||s.value.playing)return;s.value.playing=!0,e.clicking=!0,e.add=s.value.next;const t=await V();if(s.value.count++,e.clicking=!1,e.status=t.mine?-1:1,s.value.playing=!1,s.value.bouns=t.bouns,s.value.next=t.next,e.status===1)q(n.target);else if(e.status===-1){C(!1);return}s.value.count+1===c.value*c.value&&C(!0)}async function V(){await m(300);const e=((10-9.5)*4/(c.value*c.value)).toFixed(2),n=parseInt(Math.random()*5)===1;return{next:parseFloat(e),mine:n,bouns:parseFloat((s.value.bouns+s.value.next).toFixed(2))}}z(T),F(2),s.value=D(),j(()=>{w.value=Math.min(500,document.body.clientWidth),k.value=(w.value-110)/2-d.value}),z(()=>{x.value&&(B.value=x.value.getBoundingClientRect())});function D(){return{count:0,bouns:0,next:9.5,playing:!1}}function N(){return Array(c.value).fill("").map((e,n)=>Array(c.value).fill("").map((t,a)=>({id:c.value*n+a,clicking:!1,status:0,add:0})))}return(e,n)=>(o(),l(h,null,[i("div",U,[i("div",Y,[(o(),l(h,null,S([2,4,8],t=>i("div",{class:E(["type-selector",{"type-selector-active":t===c.value}]),onClick:a=>F(t)},f(t)+" x "+f(t),11,Z)),64))])]),i("div",{class:"stage",style:p({margin:d.value+"px"})},[(o(!0),l(h,null,S(y.value,t=>(o(),l("div",ee,[(o(!0),l(h,null,S(t,a=>(o(),l("div",{class:E(["block flex",X(a)]),style:p({width:b.value+"px",height:b.value+"px",margin:I.value+"px"}),onClick:H(_=>G(a,_),["self"]),key:a.id},[a.clicking?(o(),l("img",se)):v("",!0),a.status===-1?(o(),l("img",ae)):v("",!0),a.status===-2?(o(),l("img",ne)):v("",!0),a.status===1?(o(),l("div",oe,[i("div",le,[i("div",null,"₹"+f(a.add),1),ue])])):v("",!0)],14,te))),128))]))),256)),r.value?v("",!0):(o(),l("div",{key:0,class:"start-btn",style:p({top:k.value+"px",left:k.value+"px"}),onClick:$},ce,4))],4),r.value?(o(),l("div",{key:0,class:"result",style:p({margin:d.value+"px"})},[i("div",re,[i("div",{ref_key:"bounsDom",ref:x},"bouns: ₹"+f(s.value.bouns),513),i("div",null,"next: +₹"+f(s.value.next),1),i("div",{class:"stop-btn",onClick:C},"Stop and get bounus")])],4)):v("",!0),r.value?v("",!0):(o(),l("div",{key:1,class:"play-tip",style:p({margin:d.value+"px"})},"Check the boxes that you think have no mines to get a bonus!",4))],64))}},fe=P(ve,[["__scopeId","data-v-0f423f92"]]);export{fe as default};
