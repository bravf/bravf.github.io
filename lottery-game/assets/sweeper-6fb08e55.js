import{_ as O,r as i,f as z,g as P,o,a as l,b as u,F as h,h as S,n as p,i as v,t as m,j as N,k as H,p as J,l as K}from"./index-c5bc625e.js";import{u as Q}from"./index-228293ff.js";import{s as U,a as Y,b as f}from"./base-ec8923fe.js";import"./index-36f27743.js";import"./index-9c01e477.js";const E=g=>(J("data-v-595c00e8"),g=g(),K(),g),Z={class:"topbar"},ee={class:"type-selector-box"},te=["onClick"],se={class:"row"},ae=["onClick"],ne={key:0,class:"shovel",src:"https://res.cloudinary.com/fiewin/image/upload/images/boomShovelNew.png"},oe={key:1,src:"https://res.cloudinary.com/fiewin/image/upload/images/boomImgNew.png"},le={key:2,src:"https://res.cloudinary.com/fiewin/image/upload/images/frozenBoomNew1.png"},ie={key:3,class:"coin"},ue={class:"inner"},ce=E(()=>u("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/Coin_b.png"},null,-1)),re=E(()=>u("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/boomRestart.png"},null,-1)),ve=[re],de={class:"flex"},pe={__name:"sweeper",setup(g){const r=i(!1),s=i(null),y=i(null),x=i(null),B=i(),w=i(375),k=i(0),c=i(2),d=i(16),M=i(12),I=i(0),b=i(0);function T(){y.value=R(),I.value=M.value/c.value,b.value=(w.value-d.value*2-M.value)/c.value}function $(e){r.value||(c.value=e)}async function A(){r.value=!0,y.value=R()}async function C(e=!0){e?(X(),U(`这一把赢了${s.value.bouns}`)):Y("踩雷了，继续下一把吧"),r.value=!1,s.value=D()}function X(){const e=[];y.value.forEach(n=>{n.forEach(t=>{t.status||e.push(t)})}),e[parseInt(Math.random()*e.length)].status=-2}function q(e){return{"block-scale-animation":r.value&&e.status===0,"block-green":e.status===1,"block-red":e.status===-1}}async function G(e){await f(50);const n=e.querySelector(".coin"),t=n.querySelector(".inner"),a=B.value,_=n.getBoundingClientRect(),j=a.x-_.x,L=a.y-_.y;await f(300),t.style.animation="none",await f(50),n.style.transform=`translate3d(${j}px, 0, 0)`,t.style.transform=`translate3d(0, ${L}px, 0)`,await f(500),n.style.display="none"}async function V(e,n){if(!r.value||e.status||s.value.playing)return;s.value.playing=!0,e.clicking=!0,e.add=s.value.next;const t=await W();if(s.value.count++,e.clicking=!1,e.status=t.mine?-1:1,s.value.playing=!1,s.value.bouns=t.bouns,s.value.next=t.next,e.status===1)G(n.target);else if(e.status===-1){C(!1);return}s.value.count+1===c.value*c.value&&C(!0)}async function W(){await f(300);const e=((10-9.5)*4/(c.value*c.value)).toFixed(2),n=parseInt(Math.random()*5)===1;return{next:parseFloat(e),mine:n,bouns:parseFloat((s.value.bouns+s.value.next).toFixed(2))}}function F(){w.value=Math.min(500,document.body.clientWidth),k.value=(w.value-110)/2-d.value}z(T),s.value=D(),P(F),Q(document.body,F),z(()=>{x.value&&(B.value=x.value.getBoundingClientRect())});function D(){return{count:0,bouns:0,next:9.5,playing:!1}}function R(){return Array(c.value).fill("").map((e,n)=>Array(c.value).fill("").map((t,a)=>({id:c.value*n+a,clicking:!1,status:0,add:0})))}return(e,n)=>(o(),l(h,null,[u("div",Z,[u("div",ee,[(o(),l(h,null,S([2,4,8],t=>u("div",{class:N(["type-selector",{"type-selector-active":t===c.value}]),onClick:a=>$(t)},m(t)+" x "+m(t),11,te)),64))])]),u("div",{class:"stage",style:p({margin:d.value+"px"})},[(o(!0),l(h,null,S(y.value,t=>(o(),l("div",se,[(o(!0),l(h,null,S(t,a=>(o(),l("div",{class:N(["block flex",q(a)]),style:p({width:b.value+"px",height:b.value+"px",margin:I.value+"px"}),onClick:H(_=>V(a,_),["self"]),key:a.id},[a.clicking?(o(),l("img",ne)):v("",!0),a.status===-1?(o(),l("img",oe)):v("",!0),a.status===-2?(o(),l("img",le)):v("",!0),a.status===1?(o(),l("div",ie,[u("div",ue,[u("div",null,"₹"+m(a.add),1),ce])])):v("",!0)],14,ae))),128))]))),256)),r.value?v("",!0):(o(),l("div",{key:0,class:"start-btn",style:p({top:k.value+"px",left:k.value+"px"}),onClick:A},ve,4))],4),r.value?(o(),l("div",{key:0,class:"result",style:p({margin:d.value+"px"})},[u("div",de,[u("div",{ref_key:"bounsDom",ref:x},"bouns: ₹"+m(s.value.bouns),513),u("div",null,"next: +₹"+m(s.value.next),1),u("div",{class:"stop-btn",onClick:C},"Stop and get bounus")])],4)):v("",!0),r.value?v("",!0):(o(),l("div",{key:1,class:"play-tip",style:p({margin:d.value+"px"})},"Check the boxes that you think have no mines to get a bonus!",4))],64))}},he=O(pe,[["__scopeId","data-v-595c00e8"]]);export{he as default};
