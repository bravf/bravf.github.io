import{u as J}from"./index-2aefc89c.js";import{_ as K,r as n,y as r,f as E,g as U,o,a as i,b as t,n as h,u as _,t as k,F as y,h as $,i as w}from"./index-caa4f2e2.js";import{u as X}from"./index-eb0d30af.js";const Z={class:"fly"},ee={class:"stage"},te={class:"odds"},ae={class:"time-axis"},se={key:0},le={class:"odds-axis"},ue={key:0},ne={class:"stop-users"},oe=["width","height"],ie={id:"mask1"},ce=["d"],ve=["d"],de=["d"],re={__name:"fly",setup(he){const a=n(375),l=n(0),W=n(40),v=n(1),L=n(100),O=n(50),q=n(30),I=n(10),P=n([]),f=r(()=>(a.value-I.value*2)/Math.max(2,l.value)),S=r(()=>(a.value-I.value*2)/Math.max(4,v.value)),A=r(()=>a.value),d=r(()=>({x:0,y:a.value})),B=r(()=>({x:l.value*f.value,y:a.value-(v.value-1)*S.value})),s=r(()=>({x:Math.min(B.value.x,a.value-O.value),y:Math.max(q.value,B.value.y)})),p=r(()=>({x:s.value.x*.7,y:(d.value.y-s.value.y)*.7+s.value.y}));function N(u){if(!l.value)return!0;const c=Math.ceil(l.value/8);return u%c===0}function Q(u){if(!v.value)return!0;const c=Math.ceil(v.value/8);return(u-1)%c===0}function T(u,c,e,C,D,H,R){const M=u-2*e+D,x=2*(e-u),Y=u-R,z=x*x-4*M*Y,b=(-x+Math.sqrt(z))/(2*M),G=(-x-Math.sqrt(z))/(2*M),m=b>=0&&b<=1?b:G;return Math.pow(1-m,2)*c+2*m*(1-m)*C+Math.pow(m,2)*H}function V(u){const c=u*f.value,e=T(d.value.x,d.value.y,p.value.x,p.value.y,s.value.x,s.value.y,c);return{left:c+"px",top:e+"px"}}const F=n("");E(()=>{F.value=`M${d.value.x},${d.value.y} Q${p.value.x},${p.value.y} ${s.value.x},${s.value.y}`});const g=n("");E(()=>{g.value=`M${d.value.x},${d.value.y} L${s.value.x},${d.value.y} L${s.value.x},${s.value.y}`}),U(()=>{a.value=document.body.clientWidth}),J(document.body,()=>{a.value=document.body.clientWidth});const j=X(()=>{l.value+=.1,v.value+=.05,l.value>=W.value&&j.pause(),parseInt(Math.random(l.value)*5)===0&&P.value.push(l.value),l.value=Math.min(l.value,a.value),v.value=Math.min(v.value,a.value)},100);return(u,c)=>(o(),i("div",Z,[t("div",ee,[t("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:h({left:_(s).x+"px",top:_(s).y-30+"px"})},null,4),t("div",te,k(v.value.toFixed(2))+"x",1),t("div",{class:"time-axis-box",style:h({width:a.value+"px"})},[t("div",ae,[(o(!0),i(y,null,$(W.value,e=>(o(),i("div",{class:"time-axis-item",style:h({width:_(f)+"px"})},[N(e-1)?(o(),i("span",se,k(e-1)+"s",1)):w("",!0)],4))),256))])],4),t("div",{class:"odds-axis-box",style:h({height:a.value+"px"})},[t("div",le,[(o(!0),i(y,null,$(L.value,e=>(o(),i("div",{class:"odds-axis-item",style:h({height:_(S)+"px"})},[Q(e)?(o(),i("span",ue,k(e)+"x",1)):w("",!0)],4))),256))])],4),t("div",ne,[(o(!0),i(y,null,$(P.value,e=>(o(),i(y,null,[l.value-e<5?(o(),i("div",{key:0,class:"stop-user",style:h({...V(e)})},null,4)):w("",!0)],64))),256))]),(o(),i("svg",{width:_(A),height:_(A)},[t("defs",null,[t("mask",ie,[t("path",{d:g.value,fill:"#fff"},null,8,ce),t("path",{d:F.value,fill:"black"},null,8,ve)])]),t("path",{d:g.value,fill:"pink",mask:"url(#mask1)"},null,8,de)],8,oe))])]))}},ye=K(re,[["__scopeId","data-v-82e3972b"]]);export{ye as default};
