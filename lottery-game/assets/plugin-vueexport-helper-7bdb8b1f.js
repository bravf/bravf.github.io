import{as as K,r as I,at as j,au as de,Y as he,i as q,V as Y,av as pe,aw as ye,ax as me,ay as ve,az as Z,E as be,a7 as we,aA as _e,aB as ee,aC as Oe,aD as Fe}from"./index-7f74ae69.js";function te(e){var r;const t=j(e);return(r=t==null?void 0:t.$el)!=null?r:t}const U=ye?window:void 0;function oe(...e){let r,t,o,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,u]=e,r=U):[r,t,o,u]=e,!r)return me;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const i=[],n=()=>{i.forEach(f=>f()),i.length=0},_=(f,l,v,h)=>(f.addEventListener(l,v,h),()=>f.removeEventListener(l,v,h)),d=Y(()=>[te(r),j(u)],([f,l])=>{n(),f&&i.push(...t.flatMap(v=>o.map(h=>_(f,v,h,l))))},{immediate:!0,flush:"post"}),p=()=>{d(),n()};return pe(p),p}function ge(){const e=I(!1);return be()&&we(()=>{e.value=!0}),e}function Pe(e){const r=ge();return q(()=>(r.value,!!e()))}const R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G="__vueuse_ssr_handlers__",Se=Ee();function Ee(){return G in R||(R[G]=R[G]||{}),R[G]}function je(e,r){return Se[e]||r}function $e(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var Ae=Object.defineProperty,ae=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,se=(e,r,t)=>r in e?Ae(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ie=(e,r)=>{for(var t in r||(r={}))Te.call(r,t)&&se(e,t,r[t]);if(ae)for(var t of ae(r))De.call(r,t)&&se(e,t,r[t]);return e};const Ne={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},le="vueuse-storage";function Ge(e,r,t,o={}){var u;const{flush:i="pre",deep:n=!0,listenToStorageChanges:_=!0,writeDefaults:d=!0,mergeDefaults:p=!1,shallow:f,window:l=U,eventFilter:v,onError:h=a=>{console.error(a)}}=o,b=(f?K:I)(r);if(!t)try{t=je("getDefaultStorage",()=>{var a;return(a=U)==null?void 0:a.localStorage})()}catch(a){h(a)}if(!t)return b;const O=j(r),C=$e(O),S=(u=o.serializer)!=null?u:Ne[C],{pause:V,resume:z}=de(b,()=>Q(b.value),{flush:i,deep:n,eventFilter:v});return l&&_&&(oe(l,"storage",T),oe(l,le,A)),T(),b;function Q(a){try{if(a==null)t.removeItem(e);else{const c=S.write(a),F=t.getItem(e);F!==c&&(t.setItem(e,c),l&&l.dispatchEvent(new CustomEvent(le,{detail:{key:e,oldValue:F,newValue:c,storageArea:t}})))}}catch(c){h(c)}}function $(a){const c=a?a.newValue:t.getItem(e);if(c==null)return d&&O!==null&&t.setItem(e,S.write(O)),O;if(!a&&p){const F=S.read(c);return typeof p=="function"?p(F,O):C==="object"&&!Array.isArray(F)?ie(ie({},O),F):F}else return typeof c!="string"?c:S.read(c)}function A(a){T(a.detail)}function T(a){if(!(a&&a.storageArea!==t)){if(a&&a.key==null){b.value=O;return}if(!(a&&a.key!==e)){V();try{b.value=$(a)}catch(c){h(c)}finally{a?he(z):z()}}}}}var ue=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Me=(e,r)=>{var t={};for(var o in e)Ce.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&ue)for(var o of ue(e))r.indexOf(o)<0&&ze.call(e,o)&&(t[o]=e[o]);return t};function Ke(e,r,t={}){const o=t,{window:u=U}=o,i=Me(o,["window"]);let n;const _=Pe(()=>u&&"ResizeObserver"in u),d=()=>{n&&(n.disconnect(),n=void 0)},p=q(()=>Array.isArray(e)?e.map(v=>te(v)):[te(e)]),f=Y(p,v=>{if(d(),_.value&&u){n=new ResizeObserver(r);for(const h of v)h&&n.observe(h,i)}},{immediate:!0,flush:"post",deep:!0}),l=()=>{d(),f()};return pe(l),{isSupported:_,stop:l}}var xe=Object.defineProperty,Ie=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,fe=(e,r,t)=>r in e?xe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,s=(e,r)=>{for(var t in r||(r={}))He.call(r,t)&&fe(e,t,r[t]);if(ce)for(var t of ce(r))Je.call(r,t)&&fe(e,t,r[t]);return e},E=(e,r)=>Ie(e,Ve(r));const Ue={json:"application/json",text:"text/plain"};function k(e){return e&&_e(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function We(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function J(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function x(e,...r){return e==="overwrite"?async t=>{const o=r[r.length-1];return o?s(s({},t),await o(t)):t}:async t=>{for(const o of r)o&&(t=s(s({},t),await o(t)));return t}}function Ye(e={}){const r=e.combination||"chain",t=e.options||{},o=e.fetchOptions||{};function u(i,...n){const _=q(()=>{const f=j(e.baseUrl),l=j(i);return f&&!We(l)?Le(f,l):l});let d=t,p=o;return n.length>0&&(k(n[0])?d=E(s(s({},d),n[0]),{beforeFetch:x(r,t.beforeFetch,n[0].beforeFetch),afterFetch:x(r,t.afterFetch,n[0].afterFetch),onFetchError:x(r,t.onFetchError,n[0].onFetchError)}):p=E(s(s({},p),n[0]),{headers:s(s({},J(p.headers)||{}),J(n[0].headers)||{})})),n.length>1&&k(n[1])&&(d=E(s(s({},d),n[1]),{beforeFetch:x(r,t.beforeFetch,n[1].beforeFetch),afterFetch:x(r,t.afterFetch,n[1].afterFetch),onFetchError:x(r,t.onFetchError,n[1].onFetchError)})),Be(_,p,d)}return u}function Be(e,...r){var t;const o=typeof AbortController=="function";let u={},i={immediate:!0,refetch:!1,timeout:0};const n={method:"GET",type:"text",payload:void 0};r.length>0&&(k(r[0])?i=s(s({},i),r[0]):u=r[0]),r.length>1&&k(r[1])&&(i=s(s({},i),r[1]));const{fetch:_=(t=U)==null?void 0:t.fetch,initialData:d,timeout:p}=i,f=ee(),l=ee(),v=ee(),h=I(!1),b=I(!1),O=I(!1),C=I(null),S=K(null),V=K(null),z=K(d||null),Q=q(()=>o&&b.value);let $,A;const T=()=>{o&&($==null||$.abort(),$=new AbortController,$.signal.onabort=()=>O.value=!0,u=E(s({},u),{signal:$.signal}))},a=y=>{b.value=y,h.value=!y};p&&(A=ve(T,p,{immediate:!1}));const c=async(y=!1)=>{var g;T(),a(!0),V.value=null,C.value=null,O.value=!1;const w={method:n.method,headers:{}};if(n.payload){const B=J(w.headers);n.payloadType&&(B["Content-Type"]=(g=Ue[n.payloadType])!=null?g:n.payloadType);const L=j(n.payload);w.body=n.payloadType==="json"?JSON.stringify(L):L}let M=!1;const P={url:j(e),options:s(s({},w),u),cancel:()=>{M=!0}};if(i.beforeFetch&&Object.assign(P,await i.beforeFetch(P)),M||!_)return a(!1),Promise.resolve(null);let N=null;return A&&A.start(),new Promise((B,L)=>{var re;_(P.url,E(s(s({},w),P.options),{headers:s(s({},J(w.headers)),J((re=P.options)==null?void 0:re.headers))})).then(async m=>{if(S.value=m,C.value=m.status,N=await m[n.type](),!m.ok)throw z.value=d||null,new Error(m.statusText);return i.afterFetch&&({data:N}=await i.afterFetch({data:N,response:m})),z.value=N,f.trigger(m),B(m)}).catch(async m=>{let ne=m.message||m.name;return i.onFetchError&&({error:ne}=await i.onFetchError({data:N,error:m,response:S.value})),V.value=ne,l.trigger(m),y?L(m):B(null)}).finally(()=>{a(!1),A&&A.stop(),v.trigger(null)})})},F=Z(i.refetch);Y([F,Z(e)],([y])=>y&&c(),{deep:!0});const W={isFinished:h,statusCode:C,response:S,error:V,data:z,isFetching:b,canAbort:Q,aborted:O,abort:T,execute:c,onFetchResponse:f.on,onFetchError:l.on,onFetchFinally:v.on,get:D("GET"),put:D("PUT"),post:D("POST"),delete:D("DELETE"),patch:D("PATCH"),head:D("HEAD"),options:D("OPTIONS"),json:H("json"),text:H("text"),blob:H("blob"),arrayBuffer:H("arrayBuffer"),formData:H("formData")};function D(y){return(g,w)=>{if(!b.value){n.method=y,n.payload=g,n.payloadType=w,Oe(n.payload)&&Y([F,Z(n.payload)],([P])=>P&&c(),{deep:!0});const M=j(n.payload);return!w&&M&&Object.getPrototypeOf(M)===Object.prototype&&!(M instanceof FormData)&&(n.payloadType="json"),E(s({},W),{then(P,N){return X().then(P,N)}})}}}function X(){return new Promise((y,g)=>{Fe(h).toBe(!0).then(()=>y(W)).catch(w=>g(w))})}function H(y){return()=>{if(!b.value)return n.type=y,E(s({},W),{then(g,w){return X().then(g,w)}})}}return i.immediate&&Promise.resolve().then(()=>c()),E(s({},W),{then(y,g){return X().then(y,g)}})}function Le(e,r){return!e.endsWith("/")&&!r.startsWith("/")?`${e}/${r}`:`${e}${r}`}const ke=(e,r)=>{const t=e.__vccOpts||e;for(const[o,u]of r)t[o]=u;return t};export{ke as _,Ke as a,Ye as c,Ge as u};
