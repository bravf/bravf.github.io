import{u as U}from"./index-0b429ea3.js";import{_ as X,r as o,y as s,g as Z,o as u,a as l,b as r,n as h,u as i,t as P,F as W,h as I,i as C}from"./index-6bd72817.js";import{u as ee}from"./index-7685b303.js";const te={class:"fly"},ae={class:"stage"},se={class:"odds"},ne={class:"time-axis"},ue={key:0},le={class:"odds-axis"},oe={key:0},re={class:"stop-users"},ie=["width","height"],ce=["d","stroke"],ve={__name:"fly",setup(de){const f=o(375),v=o(0),L=o(500),d=o(1),q=o(500),g=o(50),M=o(30),S=o(10),A=o([]),E=s(()=>V(d.value)),b=s(()=>(x.value-S.value*2)/Math.max(2,v.value)),$=s(()=>(p.value-S.value*2)/Math.max(6,d.value)),x=s(()=>f.value),p=s(()=>x.value/1.625),c=s(()=>({x:0,y:p.value-$.value})),B=s(()=>({x:v.value*b.value,y:p.value-d.value*$.value})),t=s(()=>({x:Math.min(B.value.x,x.value-g.value),y:Math.max(M.value,B.value.y)})),y=s(()=>({x:t.value.x*.9,y:(c.value.y-t.value.y)*.9+t.value.y})),H=s(()=>{const e=t.value.x*.8,a=F(e);return Math.atan2(t.value.x-e,a-t.value.y)*180/Math.PI-90}),N=s(()=>({left:Math.max(0,t.value.x-g.value/2)+"px",top:Math.max(0,t.value.y-M.value/2)+"px",width:g.value+"px",height:M.value+"px",transform:`rotate(${H.value}deg)`})),Q=s(()=>`M${c.value.x},${c.value.y} Q${y.value.x},${y.value.y} ${t.value.x},${t.value.y}`);s(()=>`M${c.value.x},${c.value.y} L${t.value.x},${c.value.y} L${t.value.x},${t.value.y}`);function R(e){if(!v.value)return!0;const a=Math.ceil(v.value/8);return e%a===0}function T(e){if(!d.value)return!0;const a=Math.ceil(d.value/8);return e%a===0}function V(e){return e>=100.01?"purple":e>=5.01?"blue":e>=2.01?"cyan":e>=1.21?"green":"red"}function F(e,a=c.value.x,n=c.value.y,O=y.value.x,D=y.value.y,Y=t.value.x,G=t.value.y){const w=a-2*O+Y,_=2*(O-a),J=a-e,z=_*_-4*w*J,k=(-_+Math.sqrt(z))/(2*w),K=(-_-Math.sqrt(z))/(2*w),m=k>=0&&k<=1?k:K;return Math.pow(1-m,2)*n+2*m*(1-m)*D+Math.pow(m,2)*G}function j(e){const a=Math.min(e*b.value,t.value.x),n=F(a);return{left:a+"px",top:n+"px"}}return Z(()=>{f.value=document.body.clientWidth}),U(document.body,()=>{f.value=document.body.clientWidth}),ee(()=>{v.value+=.1,d.value+=.01,parseInt(Math.random(v.value)*50)===0&&A.value.push(Math.max(0,v.value-.1))},100),(e,a)=>(u(),l("div",te,[r("div",ae,[r("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:h(i(N))},null,4),r("div",se,P(d.value.toFixed(2))+"x",1),r("div",{class:"time-axis-box",style:h({width:i(x)+"px"})},[r("div",ne,[(u(!0),l(W,null,I(L.value,n=>(u(),l("div",{class:"time-axis-item",style:h({width:i(b)+"px"})},[R(n-1)?(u(),l("span",ue,P(n-1)+"s",1)):C("",!0)],4))),256))])],4),r("div",{class:"odds-axis-box",style:h({height:i(p)+"px"})},[r("div",le,[(u(!0),l(W,null,I(q.value,n=>(u(),l("div",{class:"odds-axis-item",style:h({height:i($)+"px"})},[T(n-1)?(u(),l("span",oe,P(n-1)+"x",1)):C("",!0)],4))),256))])],4),r("div",re,[(u(!0),l(W,null,I(A.value,n=>(u(),l("div",{class:"stop-user",style:h({...j(n)}),key:n},null,4))),128))]),(u(),l("svg",{width:i(x),height:i(p)},[r("path",{d:i(Q),fill:"none",stroke:i(E)},null,8,ce)],8,ie))])]))}},_e=X(ve,[["__scopeId","data-v-c0311782"]]);export{_e as default};
