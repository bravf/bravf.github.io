import{u as K}from"./index-3bc4a908.js";import{_ as U,r as c,y as u,g as X,o as l,a as o,b as v,n as x,u as h,t as w,F as k,h as P,i as z}from"./index-58cb254a.js";import{u as Z}from"./index-b956b34a.js";const ee={class:"fly"},te={class:"stage"},ae={class:"odds"},se={class:"time-axis"},ne={key:0},ue={class:"odds-axis"},le={key:0},oe={class:"stop-users"},re=["width","height"],ie=["d","stroke"],ce={__name:"fly",setup(ve){const s=c(375),r=c(0),C=c(500),i=c(1),L=c(500),m=c(50),f=c(30),W=c(10),I=c([]),q=u(()=>V(i.value)),g=u(()=>(s.value-W.value*2)/Math.max(2,r.value)),M=u(()=>(s.value-W.value*2)/Math.max(6,i.value)),S=u(()=>s.value),d=u(()=>({x:0,y:s.value-M.value})),A=u(()=>({x:r.value*g.value,y:s.value-i.value*M.value})),t=u(()=>({x:Math.min(A.value.x,s.value-m.value),y:Math.max(f.value,A.value.y)})),p=u(()=>({x:t.value.x*.9,y:(d.value.y-t.value.y)*.9+t.value.y})),E=u(()=>{const e=t.value.x*.8,a=B(e);return Math.atan2(t.value.x-e,a-t.value.y)*180/Math.PI-90}),N=u(()=>({left:Math.max(0,t.value.x-m.value/2)+"px",top:Math.max(0,t.value.y-f.value/2)+"px",width:m.value+"px",height:f.value+"px",transform:`rotate(${E.value}deg)`})),Q=u(()=>`M${d.value.x},${d.value.y} Q${p.value.x},${p.value.y} ${t.value.x},${t.value.y}`);u(()=>`M${d.value.x},${d.value.y} L${t.value.x},${d.value.y} L${t.value.x},${t.value.y}`);function R(e){if(!r.value)return!0;const a=Math.ceil(r.value/8);return e%a===0}function T(e){if(!i.value)return!0;const a=Math.ceil(i.value/8);return e%a===0}function V(e){return e>=100.01?"purple":e>=5.01?"blue":e>=2.01?"cyan":e>=1.21?"green":"red"}function B(e,a=d.value.x,n=d.value.y,F=p.value.x,D=p.value.y,H=t.value.x,Y=t.value.y){const b=a-2*F+H,y=2*(F-a),G=a-e,O=y*y-4*b*G,$=(-y+Math.sqrt(O))/(2*b),J=(-y-Math.sqrt(O))/(2*b),_=$>=0&&$<=1?$:J;return Math.pow(1-_,2)*n+2*_*(1-_)*D+Math.pow(_,2)*Y}function j(e){const a=Math.min(e*g.value,t.value.x),n=B(a);return{left:a+"px",top:n+"px"}}return X(()=>{s.value=document.body.clientWidth}),K(document.body,()=>{s.value=document.body.clientWidth}),Z(()=>{r.value+=.1,i.value+=.01,parseInt(Math.random(r.value)*50)===0&&I.value.push(Math.max(0,r.value-.1)),r.value=Math.min(r.value,s.value),i.value=Math.min(i.value,s.value)},100),(e,a)=>(l(),o("div",ee,[v("div",te,[v("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:x(h(N))},null,4),v("div",ae,w(i.value.toFixed(2))+"x",1),v("div",{class:"time-axis-box",style:x({width:s.value+"px"})},[v("div",se,[(l(!0),o(k,null,P(C.value,n=>(l(),o("div",{class:"time-axis-item",style:x({width:h(g)+"px"})},[R(n-1)?(l(),o("span",ne,w(n-1)+"s",1)):z("",!0)],4))),256))])],4),v("div",{class:"odds-axis-box",style:x({height:s.value+"px"})},[v("div",ue,[(l(!0),o(k,null,P(L.value,n=>(l(),o("div",{class:"odds-axis-item",style:x({height:h(M)+"px"})},[T(n-1)?(l(),o("span",le,w(n-1)+"x",1)):z("",!0)],4))),256))])],4),v("div",oe,[(l(!0),o(k,null,P(I.value,n=>(l(),o("div",{class:"stop-user",style:x({...j(n)}),key:n},null,4))),128))]),(l(),o("svg",{width:h(S),height:h(S)},[v("path",{d:h(Q),fill:"none",stroke:h(q)},null,8,ie)],8,re))])]))}},ye=U(ce,[["__scopeId","data-v-5e0e1723"]]);export{ye as default};
