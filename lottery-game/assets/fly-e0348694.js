import{u as K}from"./index-62a21dbc.js";import{_ as U,r as u,y as c,f as L,g as X,o,a as i,b as v,n as h,u as x,t as w,F as k,h as P,i as O}from"./index-fdadad88.js";import{u as Z}from"./index-021cc5ad.js";const ee={class:"fly"},te={class:"stage"},ae={class:"odds"},se={class:"time-axis"},le={key:0},ue={class:"odds-axis"},ne={key:0},oe={class:"stop-users"},ie=["width","height"],ce=["d"],ve={__name:"fly",setup(re){const a=u(375),n=u(0),q=u(500),r=u(1),N=u(500),m=u(50),f=u(30),W=u(10),I=u([]),M=c(()=>(a.value-W.value*2)/Math.max(4,n.value)),g=c(()=>(a.value-W.value*2)/Math.max(8,r.value)),S=c(()=>a.value),d=c(()=>({x:0,y:a.value-g.value})),A=c(()=>({x:n.value*M.value,y:a.value-r.value*g.value})),e=c(()=>({x:Math.min(A.value.x,a.value-m.value),y:Math.max(f.value,A.value.y)})),p=c(()=>({x:e.value.x*.7,y:(d.value.y-e.value.y)*.7+e.value.y})),Q=c(()=>{const s=e.value.x/4,t=B(s);return Math.atan2(e.value.x-s,t-e.value.y)*180/Math.PI-90}),R=c(()=>({left:Math.max(0,e.value.x-m.value/2)+"px",top:Math.max(0,e.value.y-f.value/2)+"px",width:m.value+"px",height:f.value+"px",transform:`rotate(${Q.value}deg)`}));function T(s){if(!n.value)return!0;const t=Math.ceil(n.value/8);return s%t===0}function V(s){if(!r.value)return!0;const t=Math.ceil(r.value/8);return s%t===0}function B(s,t=d.value.x,l=d.value.y,z=p.value.x,D=p.value.y,H=e.value.x,Y=e.value.y){const b=t-2*z+H,y=2*(z-t),G=t-s,E=y*y-4*b*G,$=(-y+Math.sqrt(E))/(2*b),J=(-y-Math.sqrt(E))/(2*b),_=$>=0&&$<=1?$:J;return Math.pow(1-_,2)*l+2*_*(1-_)*D+Math.pow(_,2)*Y}function j(s){const t=Math.min(s*M.value,e.value.x),l=B(t);return{left:t+"px",top:l+"px"}}const F=u("");L(()=>{F.value=`M${d.value.x},${d.value.y} Q${p.value.x},${p.value.y} ${e.value.x},${e.value.y}`});const C=u("");return L(()=>{C.value=`M${d.value.x},${d.value.y} L${e.value.x},${d.value.y} L${e.value.x},${e.value.y}`}),X(()=>{a.value=document.body.clientWidth}),K(document.body,()=>{a.value=document.body.clientWidth}),Z(()=>{n.value+=.1,r.value+=.01,n.value>10,parseInt(Math.random(n.value)*10)===0&&I.value.push(Math.max(0,n.value-.1)),n.value=Math.min(n.value,a.value),r.value=Math.min(r.value,a.value)},100),(s,t)=>(o(),i("div",ee,[v("div",te,[v("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:h(x(R))},null,4),v("div",ae,w(r.value.toFixed(2))+"x",1),v("div",{class:"time-axis-box",style:h({width:a.value+"px"})},[v("div",se,[(o(!0),i(k,null,P(q.value,l=>(o(),i("div",{class:"time-axis-item",style:h({width:x(M)+"px"})},[T(l-1)?(o(),i("span",le,w(l-1)+"s",1)):O("",!0)],4))),256))])],4),v("div",{class:"odds-axis-box",style:h({height:a.value+"px"})},[v("div",ue,[(o(!0),i(k,null,P(N.value,l=>(o(),i("div",{class:"odds-axis-item",style:h({height:x(g)+"px"})},[V(l-1)?(o(),i("span",ne,w(l-1)+"x",1)):O("",!0)],4))),256))])],4),v("div",oe,[(o(!0),i(k,null,P(I.value,l=>(o(),i("div",{class:"stop-user",style:h({...j(l)}),key:l},null,4))),128))]),(o(),i("svg",{width:x(S),height:x(S)},[v("path",{d:F.value,fill:"none",stroke:"red"},null,8,ce)],8,ie))])]))}},ye=U(ve,[["__scopeId","data-v-71f01cbc"]]);export{ye as default};
