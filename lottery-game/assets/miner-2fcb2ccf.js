import{u as Q,r as c,i as x,m as N,o as l,c as u,a as i,n as v,e as h,F as C,b as B,q as d,t as m,x as U,y as Y,j as E,z as Z,p as ee,f as te}from"./index-7f74ae69.js";import{c as se,b as R,s as g}from"./base-adb1d850.js";import{_ as ae}from"./plugin-vueexport-helper-7bdb8b1f.js";const T=f=>(ee("data-v-d2915c7a"),f=f(),te(),f),ne={class:"miner"},oe={class:"block-stage"},le={class:"row"},ue=["onClick"],ie={key:0,class:"shovel",src:"https://res.cloudinary.com/fiewin/image/upload/images/boomShovelNew.png"},ce={key:1,src:"https://res.cloudinary.com/fiewin/image/upload/images/boomImgNew.png"},re={key:2,src:"https://res.cloudinary.com/fiewin/image/upload/images/frozenBoomNew1.png"},de={key:3,class:"coin"},ve={class:"inner"},pe=T(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/Coin_b.png"},null,-1)),me=T(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/boomRestart.png"},null,-1)),ge=[me],fe={class:"type-selector-box"},ye=["onClick"],_e={class:"flex"},xe={__name:"miner",setup(f){Q(e=>({"111e1932":h(se)}));const r=c(!1),a=c(null),y=c(null),k=c(null),I=c(),o=c(2),p=c(14),b=c(8),w=c(4),M=c(12),q=x(()=>M.value/o.value),$=x(()=>(R.value-p.value*2-b.value*2-w.value*2-M.value)/o.value);function A(e){const t=12/o.value;return{width:$.value+"px",height:$.value+"px",margin:q.value+"px","border-radius":parseInt(26/o.value)+"px","box-shadow":`inset -${t}px -${t}px ${t}px 0 ${e.status===0?"#509438":"#366531"}`}}function V(e){return{"block-scale-animation":r.value&&e.status===0,"block-green":e.status===1,"block-red":e.status===-1}}const X=x(()=>({padding:w.value+"px","border-radius":32/o.value+"px"})),F=x(()=>(R.value-110)/2-p.value-b.value-w.value);function G(){y.value=D()}function j(e){r.value||(o.value=e)}async function L(){r.value=!0,y.value=D()}async function S(e=!0){e?(P(),U(`这一把赢了${a.value.bouns}`)):Y("踩雷了，继续下一把吧"),r.value=!1,a.value=z()}function P(){const e=[];y.value.forEach(t=>{t.forEach(s=>{s.status||e.push(s)})}),e[parseInt(Math.random()*e.length)].status=-2}async function W(e){await g(50);const t=e.querySelector(".coin"),s=t.querySelector(".inner"),n=I.value,_=t.getBoundingClientRect(),K=n.x-_.x,O=n.y-_.y;await g(300),s.style.animation="none",await g(50),t.style.transform=`translate3d(${K}px, 0, 0)`,s.style.transform=`translate3d(0, ${O}px, 0)`,await g(500),t.style.display="none"}async function H(e,t){if(!r.value||e.status||a.value.playing)return;a.value.playing=!0,e.clicking=!0,e.add=a.value.next;const s=await J();if(a.value.count++,e.clicking=!1,e.status=s.mine?-1:1,a.value.playing=!1,a.value.bouns=s.bouns,a.value.next=s.next,e.status===1)W(t.target);else if(e.status===-1){S(!1);return}a.value.count+1===o.value*o.value&&S(!0)}async function J(){await g(300);const e=((10-9.5)*4/(o.value*o.value)).toFixed(2),t=parseInt(Math.random()*5)===1;return{next:parseFloat(e),mine:t,bouns:parseFloat((a.value.bouns+a.value.next).toFixed(2))}}N(G),a.value=z(),N(()=>{k.value&&(I.value=k.value.getBoundingClientRect())});function z(){return{count:0,bouns:0,next:9.5,playing:!1}}function D(){return Array(o.value).fill("").map((e,t)=>Array(o.value).fill("").map((s,n)=>({id:o.value*t+n,clicking:!1,status:0,add:0})))}return(e,t)=>(l(),u("div",ne,[i("div",{class:"stage",style:v({margin:p.value+"px",padding:b.value+"px"})},[i("div",{class:"block-stage-box",style:v(h(X))},[i("div",oe,[(l(!0),u(C,null,B(y.value,s=>(l(),u("div",le,[(l(!0),u(C,null,B(s,n=>(l(),u("div",{class:E(["block flex",V(n)]),style:v(A(n)),onClick:Z(_=>H(n,_),["self"]),key:n.id},[n.clicking?(l(),u("img",ie)):d("",!0),n.status===-1?(l(),u("img",ce)):d("",!0),n.status===-2?(l(),u("img",re)):d("",!0),n.status===1?(l(),u("div",de,[i("div",ve,[i("div",null,"₹"+m(n.add),1),pe])])):d("",!0)],14,ue))),128))]))),256)),r.value?d("",!0):(l(),u("div",{key:0,class:"start-btn",style:v({top:h(F)+"px",left:h(F)+"px"}),onClick:L},ge,4))])],4),i("div",fe,[(l(),u(C,null,B([2,4,8],s=>i("div",{class:E(["type-selector",{"type-selector-active":s===o.value}]),onClick:n=>j(s)},m(s)+" x "+m(s),11,ye)),64))])],4),r.value?(l(),u("div",{key:0,class:"result",style:v({margin:p.value+"px"})},[i("div",_e,[i("div",{ref_key:"bounsDom",ref:k},"bouns: ₹"+m(a.value.bouns),513),i("div",null,"next: +₹"+m(a.value.next),1),i("div",{class:"stop-btn",onClick:S},"Stop and get bounus")])],4)):d("",!0),r.value?d("",!0):(l(),u("div",{key:1,class:"play-tip",style:v({margin:p.value+"px"})},"Check the boxes that you think have no mines to get a bonus!",4))]))}},we=ae(xe,[["__scopeId","data-v-d2915c7a"]]);export{we as default};
