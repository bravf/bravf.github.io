import{u as G}from"./index-eb72be16.js";import{_ as J,r,y as n,g as K,o as u,a as o,b as v,n as h,u as x,t as w,F as k,h as P,i as L}from"./index-e1e456d9.js";import{u as U}from"./index-2a13953d.js";const X={class:"fly"},Z={class:"stage"},ee={class:"odds"},te={class:"time-axis"},ae={key:0},se={class:"odds-axis"},le={key:0},ne={class:"stop-users"},ue=["width","height"],oe=["d"],ie={__name:"fly",setup(re){const a=r(375),i=r(0),O=r(500),c=r(1),q=r(500),m=r(50),f=r(30),W=r(10),I=r([]),M=n(()=>(a.value-W.value*2)/Math.max(2,i.value)),g=n(()=>(a.value-W.value*2)/Math.max(6,c.value)),S=n(()=>a.value),d=n(()=>({x:0,y:a.value-g.value})),A=n(()=>({x:i.value*M.value,y:a.value-c.value*g.value})),e=n(()=>({x:Math.min(A.value.x,a.value-m.value),y:Math.max(f.value,A.value.y)})),p=n(()=>({x:e.value.x*.9,y:(d.value.y-e.value.y)*.9+e.value.y})),E=n(()=>{const s=e.value.x*.8,t=B(s);return Math.atan2(e.value.x-s,t-e.value.y)*180/Math.PI-90}),N=n(()=>({left:Math.max(0,e.value.x-m.value/2)+"px",top:Math.max(0,e.value.y-f.value/2)+"px",width:m.value+"px",height:f.value+"px",transform:`rotate(${E.value}deg)`})),Q=n(()=>`M${d.value.x},${d.value.y} Q${p.value.x},${p.value.y} ${e.value.x},${e.value.y}`);n(()=>`M${d.value.x},${d.value.y} L${e.value.x},${d.value.y} L${e.value.x},${e.value.y}`);function R(s){if(!i.value)return!0;const t=Math.ceil(i.value/8);return s%t===0}function T(s){if(!c.value)return!0;const t=Math.ceil(c.value/8);return s%t===0}function B(s,t=d.value.x,l=d.value.y,F=p.value.x,j=p.value.y,C=e.value.x,D=e.value.y){const b=t-2*F+C,y=2*(F-t),H=t-s,z=y*y-4*b*H,$=(-y+Math.sqrt(z))/(2*b),Y=(-y-Math.sqrt(z))/(2*b),_=$>=0&&$<=1?$:Y;return Math.pow(1-_,2)*l+2*_*(1-_)*j+Math.pow(_,2)*D}function V(s){const t=Math.min(s*M.value,e.value.x),l=B(t);return{left:t+"px",top:l+"px"}}return K(()=>{a.value=document.body.clientWidth}),G(document.body,()=>{a.value=document.body.clientWidth}),U(()=>{i.value+=.1,c.value+=.01,parseInt(Math.random(i.value)*10)===0&&I.value.push(Math.max(0,i.value-.1)),i.value=Math.min(i.value,a.value),c.value=Math.min(c.value,a.value)},100),(s,t)=>(u(),o("div",X,[v("div",Z,[v("img",{class:"airplane",src:"https://bpic.588ku.com/element_origin_min_pic/17/11/16/17c07e3321595d2d0ab9790459c17e9c.jpg",style:h(x(N))},null,4),v("div",ee,w(c.value.toFixed(2))+"x",1),v("div",{class:"time-axis-box",style:h({width:a.value+"px"})},[v("div",te,[(u(!0),o(k,null,P(O.value,l=>(u(),o("div",{class:"time-axis-item",style:h({width:x(M)+"px"})},[R(l-1)?(u(),o("span",ae,w(l-1)+"s",1)):L("",!0)],4))),256))])],4),v("div",{class:"odds-axis-box",style:h({height:a.value+"px"})},[v("div",se,[(u(!0),o(k,null,P(q.value,l=>(u(),o("div",{class:"odds-axis-item",style:h({height:x(g)+"px"})},[T(l-1)?(u(),o("span",le,w(l-1)+"x",1)):L("",!0)],4))),256))])],4),v("div",ne,[(u(!0),o(k,null,P(I.value,l=>(u(),o("div",{class:"stop-user",style:h({...V(l)}),key:l},null,4))),128))]),(u(),o("svg",{width:x(S),height:x(S)},[v("path",{d:x(Q),fill:"none",stroke:"red"},null,8,oe)],8,ue))])]))}},xe=J(ie,[["__scopeId","data-v-4ba79afd"]]);export{xe as default};
