import{_ as P,r as u,w as z,o as j,a as o,c as l,b as i,F as h,d as S,n as p,e as v,t as m,f as N,g as H,p as J,h as K}from"./index-a785f07f.js";import{u as Q}from"./index-a6fc9c3b.js";import{s as U,a as Y,b as f}from"./base-7d05cf76.js";import"./index-859590d4.js";const E=g=>(J("data-v-595c00e8"),g=g(),K(),g),Z={class:"topbar"},ee={class:"type-selector-box"},te=["onClick"],se={class:"row"},ae=["onClick"],ne={key:0,class:"shovel",src:"https://res.cloudinary.com/fiewin/image/upload/images/boomShovelNew.png"},oe={key:1,src:"https://res.cloudinary.com/fiewin/image/upload/images/boomImgNew.png"},le={key:2,src:"https://res.cloudinary.com/fiewin/image/upload/images/frozenBoomNew1.png"},ue={key:3,class:"coin"},ie={class:"inner"},ce=E(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/Coin_b.png"},null,-1)),re=E(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/boomRestart.png"},null,-1)),ve=[re],de={class:"flex"},pe={__name:"sweeper",setup(g){const r=u(!1),s=u(null),y=u(null),x=u(null),B=u(),w=u(375),b=u(0),c=u(2),d=u(16),M=u(12),I=u(0),k=u(0);function T(){y.value=R(),I.value=M.value/c.value,k.value=(w.value-d.value*2-M.value)/c.value}function $(e){r.value||(c.value=e)}async function A(){r.value=!0,y.value=R()}async function C(e=!0){e?(X(),U(`这一把赢了${s.value.bouns}`)):Y("踩雷了，继续下一把吧"),r.value=!1,s.value=D()}function X(){const e=[];y.value.forEach(n=>{n.forEach(t=>{t.status||e.push(t)})}),e[parseInt(Math.random()*e.length)].status=-2}function q(e){return{"block-scale-animation":r.value&&e.status===0,"block-green":e.status===1,"block-red":e.status===-1}}async function G(e){await f(50);const n=e.querySelector(".coin"),t=n.querySelector(".inner"),a=B.value,_=n.getBoundingClientRect(),L=a.x-_.x,O=a.y-_.y;await f(300),t.style.animation="none",await f(50),n.style.transform=`translate3d(${L}px, 0, 0)`,t.style.transform=`translate3d(0, ${O}px, 0)`,await f(500),n.style.display="none"}async function V(e,n){if(!r.value||e.status||s.value.playing)return;s.value.playing=!0,e.clicking=!0,e.add=s.value.next;const t=await W();if(s.value.count++,e.clicking=!1,e.status=t.mine?-1:1,s.value.playing=!1,s.value.bouns=t.bouns,s.value.next=t.next,e.status===1)G(n.target);else if(e.status===-1){C(!1);return}s.value.count+1===c.value*c.value&&C(!0)}async function W(){await f(300);const e=((10-9.5)*4/(c.value*c.value)).toFixed(2),n=parseInt(Math.random()*5)===1;return{next:parseFloat(e),mine:n,bouns:parseFloat((s.value.bouns+s.value.next).toFixed(2))}}function F(){w.value=Math.min(500,document.body.clientWidth),b.value=(w.value-110)/2-d.value}z(T),s.value=D(),j(F),Q(document.body,F),z(()=>{x.value&&(B.value=x.value.getBoundingClientRect())});function D(){return{count:0,bouns:0,next:9.5,playing:!1}}function R(){return Array(c.value).fill("").map((e,n)=>Array(c.value).fill("").map((t,a)=>({id:c.value*n+a,clicking:!1,status:0,add:0})))}return(e,n)=>(o(),l(h,null,[i("div",Z,[i("div",ee,[(o(),l(h,null,S([2,4,8],t=>i("div",{class:N(["type-selector",{"type-selector-active":t===c.value}]),onClick:a=>$(t)},m(t)+" x "+m(t),11,te)),64))])]),i("div",{class:"stage",style:p({margin:d.value+"px"})},[(o(!0),l(h,null,S(y.value,t=>(o(),l("div",se,[(o(!0),l(h,null,S(t,a=>(o(),l("div",{class:N(["block flex",q(a)]),style:p({width:k.value+"px",height:k.value+"px",margin:I.value+"px"}),onClick:H(_=>V(a,_),["self"]),key:a.id},[a.clicking?(o(),l("img",ne)):v("",!0),a.status===-1?(o(),l("img",oe)):v("",!0),a.status===-2?(o(),l("img",le)):v("",!0),a.status===1?(o(),l("div",ue,[i("div",ie,[i("div",null,"₹"+m(a.add),1),ce])])):v("",!0)],14,ae))),128))]))),256)),r.value?v("",!0):(o(),l("div",{key:0,class:"start-btn",style:p({top:b.value+"px",left:b.value+"px"}),onClick:A},ve,4))],4),r.value?(o(),l("div",{key:0,class:"result",style:p({margin:d.value+"px"})},[i("div",de,[i("div",{ref_key:"bounsDom",ref:x},"bouns: ₹"+m(s.value.bouns),513),i("div",null,"next: +₹"+m(s.value.next),1),i("div",{class:"stop-btn",onClick:C},"Stop and get bounus")])],4)):v("",!0),r.value?v("",!0):(o(),l("div",{key:1,class:"play-tip",style:p({margin:d.value+"px"})},"Check the boxes that you think have no mines to get a bonus!",4))],64))}},_e=P(pe,[["__scopeId","data-v-595c00e8"]]);export{_e as default};
