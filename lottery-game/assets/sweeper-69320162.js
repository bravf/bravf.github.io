import{r as c,c as C,w as N,h as H,o,a as l,b as i,F as x,d as S,n as p,f as m,i as d,t as f,j as E,k as J,p as K,g as Q}from"./index-8606a9a9.js";import{u as U,s as g}from"./base-54215bbf.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{s as Z,a as ee}from"./index-93baeaa9.js";const T=y=>(K("data-v-4c4cfda7"),y=y(),Q(),y),te={class:"topbar"},se={class:"type-selector-box"},ae=["onClick"],ne={class:"row"},oe=["onClick"],le={key:0,class:"shovel",src:"https://res.cloudinary.com/fiewin/image/upload/images/boomShovelNew.png"},ie={key:1,src:"https://res.cloudinary.com/fiewin/image/upload/images/boomImgNew.png"},ue={key:2,src:"https://res.cloudinary.com/fiewin/image/upload/images/frozenBoomNew1.png"},ce={key:3,class:"coin"},re={class:"inner"},de=T(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/Coin_b.png"},null,-1)),ve=T(()=>i("img",{src:"https://res.cloudinary.com/fiewin/image/upload/images/boomRestart.png"},null,-1)),pe=[ve],me={class:"flex"},fe={__name:"sweeper",setup(y){const r=c(!1),s=c(null),_=c(null),w=c(null),B=c(),k=c(375),u=c(2),v=c(16),I=c(12),$=C(()=>I.value/u.value),M=C(()=>(k.value-v.value*2-I.value)/u.value),F=C(()=>(k.value-110)/2-v.value);function A(){_.value=z()}function X(e){r.value||(u.value=e)}async function q(){r.value=!0,_.value=z()}async function b(e=!0){e?(G(),Z(`这一把赢了${s.value.bouns}`)):ee("踩雷了，继续下一把吧"),r.value=!1,s.value=R()}function G(){const e=[];_.value.forEach(n=>{n.forEach(t=>{t.status||e.push(t)})}),e[parseInt(Math.random()*e.length)].status=-2}function V(e){return{"block-scale-animation":r.value&&e.status===0,"block-green":e.status===1,"block-red":e.status===-1}}async function W(e){await g(50);const n=e.querySelector(".coin"),t=n.querySelector(".inner"),a=B.value,h=n.getBoundingClientRect(),O=a.x-h.x,P=a.y-h.y;await g(300),t.style.animation="none",await g(50),n.style.transform=`translate3d(${O}px, 0, 0)`,t.style.transform=`translate3d(0, ${P}px, 0)`,await g(500),n.style.display="none"}async function j(e,n){if(!r.value||e.status||s.value.playing)return;s.value.playing=!0,e.clicking=!0,e.add=s.value.next;const t=await L();if(s.value.count++,e.clicking=!1,e.status=t.mine?-1:1,s.value.playing=!1,s.value.bouns=t.bouns,s.value.next=t.next,e.status===1)W(n.target);else if(e.status===-1){b(!1);return}s.value.count+1===u.value*u.value&&b(!0)}async function L(){await g(300);const e=((10-9.5)*4/(u.value*u.value)).toFixed(2),n=parseInt(Math.random()*5)===1;return{next:parseFloat(e),mine:n,bouns:parseFloat((s.value.bouns+s.value.next).toFixed(2))}}function D(){k.value=document.body.clientWidth}N(A),s.value=R(),H(D),U(document.body,D),N(()=>{w.value&&(B.value=w.value.getBoundingClientRect())});function R(){return{count:0,bouns:0,next:9.5,playing:!1}}function z(){return Array(u.value).fill("").map((e,n)=>Array(u.value).fill("").map((t,a)=>({id:u.value*n+a,clicking:!1,status:0,add:0})))}return(e,n)=>(o(),l(x,null,[i("div",te,[i("div",se,[(o(),l(x,null,S([2,4,8],t=>i("div",{class:E(["type-selector",{"type-selector-active":t===u.value}]),onClick:a=>X(t)},f(t)+" x "+f(t),11,ae)),64))])]),i("div",{class:"stage",style:p({margin:v.value+"px"})},[(o(!0),l(x,null,S(_.value,t=>(o(),l("div",ne,[(o(!0),l(x,null,S(t,a=>(o(),l("div",{class:E(["block flex",V(a)]),style:p({width:m(M)+"px",height:m(M)+"px",margin:m($)+"px"}),onClick:J(h=>j(a,h),["self"]),key:a.id},[a.clicking?(o(),l("img",le)):d("",!0),a.status===-1?(o(),l("img",ie)):d("",!0),a.status===-2?(o(),l("img",ue)):d("",!0),a.status===1?(o(),l("div",ce,[i("div",re,[i("div",null,"₹"+f(a.add),1),de])])):d("",!0)],14,oe))),128))]))),256)),r.value?d("",!0):(o(),l("div",{key:0,class:"start-btn",style:p({top:m(F)+"px",left:m(F)+"px"}),onClick:q},pe,4))],4),r.value?(o(),l("div",{key:0,class:"result",style:p({margin:v.value+"px"})},[i("div",me,[i("div",{ref_key:"bounsDom",ref:w},"bouns: ₹"+f(s.value.bouns),513),i("div",null,"next: +₹"+f(s.value.next),1),i("div",{class:"stop-btn",onClick:b},"Stop and get bounus")])],4)):d("",!0),r.value?d("",!0):(o(),l("div",{key:1,class:"play-tip",style:p({margin:v.value+"px"})},"Check the boxes that you think have no mines to get a bonus!",4))],64))}},xe=Y(fe,[["__scopeId","data-v-4c4cfda7"]]);export{xe as default};
